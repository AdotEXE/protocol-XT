# üïµÔ∏è Protocol TX: –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –ø—Ä–æ–µ–∫—Ç–∞

**–î–∞—Ç–∞:** 26.01.2026
**–°—Ç–∞—Ç—É—Å:** Pre-Release Audit

---

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (Critical)

### 1. –î–µ–ø–ª–æ–π –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–∞ –Ω–∞ Vercel
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò–≥—Ä–æ–∫–∏ –≤–∏–¥—è—Ç –æ—à–∏–±–∫—É "–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É".
**–ü—Ä–∏—á–∏–Ω–∞:** Vercel ‚Äî —ç—Ç–æ Serverless –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –æ–Ω–∞ **–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è**. –°–µ—Ä–≤–µ—Ä Colyseus –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 10-60 —Å–µ–∫—É–Ω–¥.
**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –°–æ–∑–¥–∞–Ω `railway.json` –¥–ª—è –¥–µ–ø–ª–æ—è —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Railway.
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `docs/DEPLOY_SERVER.md`.
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤ `package.json`.
- **–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –Ω–∞ Railway –∏ –ø—Ä–æ–ø–∏—Å–∞—Ç—å `VITE_WS_SERVER_URL` –≤ Vercel.

### 2. –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π `menu.ts`
**–ü—Ä–æ–±–ª–µ–º–∞:** –§–∞–π–ª `src/client/menu.ts` —Å–æ–¥–µ—Ä–∂–∏—Ç **15,258 —Å—Ç—Ä–æ–∫**.
**–†–∏—Å–∫–∏:**
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (Spaghetti code).
- –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ —Ä–µ–≥—Ä–µ—Å—Å–∏–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö.
- –£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ (—Å–ª–æ–∂–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É—à–∞—Ç–µ–ª—è–º–∏ —Å–æ–±—ã—Ç–∏–π).
**–ü—Ä–æ–≥—Ä–µ—Å—Å:**
- ‚úÖ –í—ã–¥–µ–ª–µ–Ω –º–æ–¥—É–ª—å `ProgressPanel.ts` (~340 —Å—Ç—Ä–æ–∫).
- **–ü–ª–∞–Ω:** –í—ã–¥–µ–ª–∏—Ç—å `MultiplayerMenu`, `LobbyManager`, `MapSelection`, `PlayMenu` –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏. –≠—Ç–æ –∑–∞–¥–∞—á–∞ –Ω–∞ ~1-2 –Ω–µ–¥–µ–ª–∏.

---

## üü° –í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (Major)

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ–Ω—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä—è–º—ã–µ DOM-–º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ (`innerHTML = ...`) –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–ø–∏—Å–∫–æ–≤ (–∫–æ–º–Ω–∞—Ç—ã, –∏–≥—Ä–æ–∫–∏).
**–†–∏—Å–∫–∏:**
- –ß–∞—Å—Ç—ã–µ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ (Reflow/Repaint).
- –ü–æ—Ç–µ—Ä—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–∫—É—Ä—Å–æ—Ä, –ø—Ä–æ–∫—Ä—É—Ç–∫–∞).
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª–∏–Ω–≥ –∏–ª–∏ –±–æ–ª–µ–µ –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DOM (–æ–±–Ω–æ–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–∏–≤—à–∏–µ—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã).

### 4. –¢–∏–ø–∏–∑–∞—Ü–∏—è (`any`)
**–ü—Ä–æ–±–ª–µ–º–∞:** –í –∫–æ–¥–µ –º–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `any` (–æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å `gameInstance` –∏ `multiplayerManager`).
**–†–∏—Å–∫–∏:** –û—à–∏–±–∫–∏ –≤ —Ä–∞–Ω–ª—Ç–∞–π–º–µ, –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–π –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç.
**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–æ–≥–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.

### 5. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–Ω–æ–≥–æ –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `console.log`.
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π `logger` (—É–∂–µ –µ—Å—Ç—å `src/client/utils/logger.ts`, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤–µ–∑–¥–µ).

---

## üü¢ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (Minor)

### 6. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
**–ü—Ä–æ–±–ª–µ–º–∞:** –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π –∏–≥—Ä–æ–∫–∞ (–≤—ã—Å—Ç—Ä–µ–ª—ã, –¥–≤–∏–∂–µ–Ω–∏—è) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.
**–†–∏—Å–∫–∏:** –ß–∏—Ç–µ—Ä—Å—Ç–≤–æ.
**–†–µ—à–µ–Ω–∏–µ:** –£—Å–∏–ª–∏—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ `GameServer`.

### 7. –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞:** UI –º–µ–Ω—é –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è, –Ω–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –º–µ–ª–∫–∏–º–∏.
**–†–µ—à–µ–Ω–∏–µ:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ CSS –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã.

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (Fixes)

1. **ProgressPanel Refactoring:** –ü–∞–Ω–µ–ª—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å.
2. **Server Scripts:** –î–æ–±–∞–≤–ª–µ–Ω—ã `build:server` –∏ `start:server` –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞.
3. **Deployment Config:** –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω `railway.json` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è.
4. **Docs:** –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é —Å–µ—Ä–≤–µ—Ä–∞.

---

## üèÅ –í–µ—Ä–¥–∏–∫—Ç

–ü—Ä–æ–µ–∫—Ç **–≥–æ—Ç–æ–≤ –∫ –∫–æ–º–º–∏—Ç—É**, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–Ω–µ—à–Ω–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (Railway) –¥–ª—è —Ä–∞–±–æ—Ç—ã –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–∞. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `menu.ts` —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ.
