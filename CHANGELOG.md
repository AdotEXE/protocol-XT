# Changelog

Все значимые изменения в проекте Protocol TX документируются в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект придерживается [Semantic Versioning](https://semver.org/lang/ru/).

## [Unreleased]

### Исправлено
- **Критическое исправление тряски танка**: Устранен эффект "нескольких танков" при движении
  - Камера теперь обновляется в `onAfterPhysicsObservable` после обновления физики
  - Использование `getAbsolutePosition()` вместо `position` для правильной синхронизации
  - Камера обновляется как в основном цикле `update()`, так и после физики для надежности
  - Улучшена синхронизация позиции меша с физическим телом

- **Исправлен черный экран при переходе в игру**:
  - Подписка на `onAfterPhysicsObservable` перенесена в `init()` после создания сцены
  - Добавлена проверка активной камеры перед рендерингом
  - Создание временной камеры по умолчанию если камера еще не создана
  - Исправлена ошибка "No camera defined" в render loop

- **Исправлены ошибки инициализации**:
  - Исправлена ошибка `Cannot read properties of undefined (reading 'add')` при подписке на `onAfterPhysicsObservable`
  - Улучшена проверка наличия камеры перед рендерингом сцены
  - Добавлена защита от рендеринга без активной камеры

### Изменено
- Оптимизирован порядок обновления камеры для предотвращения визуальных артефактов
- Улучшена синхронизация между физическим телом и визуальным мешем танка

## [1.0.0] - 2024-12-XX

### Добавлено
- Базовая архитектура игры на Babylon.js 8.40
- Интеграция Havok Physics для физической симуляции
- Система управления танком с hover-физикой
- Система прицеливания и стрельбы
- HUD интерфейс
- Система врагов и AI
- Система гаражей и респавна
- Система опыта и прогресса
- Система чата
- Система звуков
- Система эффектов (взрывы, дым)
- Chunk System для генерации мира
- Система припасов и консьюмаблов
- Debug Dashboard
- Physics Panel для настройки физики
- Main Menu с настройками
- Интеграция Firebase (Auth, Firestore)

### Технические детали
- WebGPU рендеринг через Babylon.js
- Havok Physics для реалистичной физики танков
- TypeScript для типобезопасности
- Vite для быстрой разработки
- Low Poly стиль графики
- Оптимизированный рендеринг с frustum culling

