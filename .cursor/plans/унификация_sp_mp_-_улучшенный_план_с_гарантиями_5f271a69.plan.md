---
name: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è SP/MP - –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–ª–∞–Ω —Å –≥–∞—Ä–∞–Ω—Ç–∏—è–º–∏
overview: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–µ—Ç–∞–ª—å–Ω—ã–π –∏ –Ω–∞–¥—ë–∂–Ω—ã–π –ø–ª–∞–Ω —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å —Ç–æ—á–Ω—ã–º–∏ –º–µ—Å—Ç–∞–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ, –æ–±—Ä–∞–±–æ—Ç–∫–æ–π edge cases –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–µ–π
todos: []
---

# –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è SP/MP —Å–∏—Å—Ç–µ–º - –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–ª–∞–Ω —Å –≥–∞—Ä–∞–Ω—Ç–∏—è–º–∏

## üéØ –¶–µ–ª—å –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã

**–¶–µ–ª—å**: –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –º–µ–∂–¥—É SP –∏ MP, —Å–æ–∑–¥–∞–≤ –µ–¥–∏–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —á–µ—Ä–µ–∑ –ø–∞—Ç—Ç–µ—Ä–Ω Strategy.

**–ü—Ä–∏–Ω—Ü–∏–ø—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**:

1. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—à–∞–≥–æ–≤–æ, —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–∫–∞—Ç–∞
2. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—Ç–∞—Ä—ã–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –¥–æ –ø–æ–ª–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ** - –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É
4. **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º** - —Å—Ç–∞—Ä—ã–π –∫–æ–¥ —É–¥–∞–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üìä –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–¥–∞

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Å—Ç–∞ —Å `if (isMultiplayer)` (34 –º–µ—Å—Ç–∞)

**–§–∞–π–ª: `src/client/game.ts`** (24 –º–µ—Å—Ç–∞):

- –°—Ç—Ä–æ–∫–∞ 769, 2264, 3382, 3635, 7732, 7763: `isInMultiplayerRoom` –ø—Ä–æ–≤–µ—Ä–∫–∏
- –°—Ç—Ä–æ–∫–∞ 3236: `if (this.isMultiplayer && this.multiplayerManager)` - —Å—Ç—Ä–µ–ª—å–±–∞
- –°—Ç—Ä–æ–∫–∞ 3578, 3609: `if ((this.isMultiplayer || isConnectedToRoom) && this.multiplayerManager)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–∞
- –°—Ç—Ä–æ–∫–∞ 3869: `if (this.isMultiplayer)` - –ø—Ä–æ–ø—É—Å–∫ —Å–ø–∞–≤–Ω–∞ –≤—Ä–∞–≥–æ–≤
- –°—Ç—Ä–æ–∫–∞ 3918: `if (!this.isMultiplayer)` - —Å–ø–∞–≤–Ω –≤—Ä–∞–≥–æ–≤ —Ç–æ–ª—å–∫–æ –≤ SP
- –°—Ç—Ä–æ–∫–∞ 4124: `if (this.isMultiplayer || hasPendingPlayers...)` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
- –°—Ç—Ä–æ–∫–∞ 4497, 4610: `if (this.isMultiplayer && this.multiplayerManager)` - —Å–µ—Ç–µ–≤—ã–µ –≤—ã–∑–æ–≤—ã
- –°—Ç—Ä–æ–∫–∞ 5071-5159: `handleEnemyDeath()` - **–ö–†–ò–¢–ò–ß–ù–û**: –≤—Å—è –ª–æ–≥–∏–∫–∞ –Ω–∞–≥—Ä–∞–¥ –∑–¥–µ—Å—å

**–§–∞–π–ª: `src/client/game/GameEnemies.ts`** (1 –º–µ—Å—Ç–æ):

- –°—Ç—Ä–æ–∫–∞ 578: `if (this.systems.isMultiplayer)` - –ø—Ä–æ–ø—É—Å–∫ —Å–ø–∞–≤–Ω–∞ –≤ MP

**–§–∞–π–ª: `src/client/game/GameMultiplayerCallbacks.ts`** (1 –º–µ—Å—Ç–æ):

- –°—Ç—Ä–æ–∫–∞ 348: `if (!isMultiplayer && players.length > 1...)` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞

**–§–∞–π–ª: `src/client/tankController.ts`** (4 –º–µ—Å—Ç–∞):

- –°—Ç—Ä–æ–∫–∏ 5564, 5574, 5586, 5662: `if (!this.isMultiplayerMode)` - —Ñ–∏–∑–∏–∫–∞ —Ç–∞–Ω–∫–∞

**–§–∞–π–ª: `src/client/game/GameConsumables.ts`** (2 –º–µ—Å—Ç–∞):

- –°—Ç—Ä–æ–∫–∏ 126, 172: `if (this.isMultiplayer && this.multiplayerManager)` - –ø–æ–¥–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–æ–≤

### –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –Ω–∞–≥—Ä–∞–¥

**–ú–µ—Å—Ç–æ 1**: `src/client/game.ts:5071-5159` - `handleEnemyDeath()`

- –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–æ–≤ (—Å—Ç—Ä–æ–∫–∞ 5108-5117)
- –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –æ–ø—ã—Ç–∞ (—Å—Ç—Ä–æ–∫–∞ 5119-5126)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (—Å—Ç—Ä–æ–∫–∞ 5128-5131)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (—Å—Ç—Ä–æ–∫–∞ 5088-5096)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∏—Å—Å–∏–π (—Å—Ç—Ä–æ–∫–∞ 5098-5101)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (—Å—Ç—Ä–æ–∫–∞ 5103-5106)

**–ú–µ—Å—Ç–æ 2**: `src/client/game/GameEnemies.ts:508-536` - `giveKillReward()`

- –î—É–±–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É –∏–∑ `handleEnemyDeath()`

**–ú–µ—Å—Ç–æ 3**: `src/client/game/GameEvents.ts:124-172` - `onTurretDestroyed()`

- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ç—É—Ä–µ–ª–µ–π

---

## üèóÔ∏è –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–¥–µ—Ç–∞–ª—å–Ω–æ)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/client/game/providers/
‚îú‚îÄ‚îÄ interfaces/
‚îÇ   ‚îú‚îÄ‚îÄ IEnemySpawner.ts              # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–ø–∞–≤–Ω–∞ –≤—Ä–∞–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ IRewardProvider.ts            # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞–≥—Ä–∞–¥
‚îÇ   ‚îú‚îÄ‚îÄ IProgressionProvider.ts      # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (–±—É–¥—É—â–µ–µ)
‚îÇ   ‚îî‚îÄ‚îÄ index.ts                      # –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
‚îú‚îÄ‚îÄ local/
‚îÇ   ‚îú‚îÄ‚îÄ LocalEnemySpawner.ts          # SP —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ LocalRewardProvider.ts         # SP —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ network/
‚îÇ   ‚îú‚îÄ‚îÄ NetworkEnemySpawner.ts        # MP —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ NetworkRewardProvider.ts      # MP —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ ProviderFactory.ts                 # –§–∞–±—Ä–∏–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ types.ts                           # –û–±—â–∏–µ —Ç–∏–ø—ã
‚îî‚îÄ‚îÄ README.md                          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üîß –î–µ—Ç–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å —Ç–æ—á–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

### –®–ê–ì 1: –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

**–§–∞–π–ª**: `src/client/game/providers/interfaces/IEnemySpawner.ts`

```typescript
import { Vector3 } from "@babylonjs/core";
import type { EnemyTank } from "../../../enemyTank";
import type { EnemyData } from "../../../../shared/types";

/**
 * –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–ø–∞–≤–Ω–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Ä–∞–≥–∞–º–∏
 * –£–Ω–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É –¥–ª—è SP (–ª–æ–∫–∞–ª—å–Ω—ã–π —Å–ø–∞–≤–Ω) –∏ MP (—Å–µ—Ç–µ–≤–æ–π —Å–ø–∞–≤–Ω)
 */
export interface IEnemySpawner {
    /**
     * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
     * @param systems - –î–æ—Å—Ç—É–ø –∫ –∏–≥—Ä–æ–≤—ã–º —Å–∏—Å—Ç–µ–º–∞–º
     */
    initialize(systems: any): void;
    
    /**
     * –°–ø–∞–≤–Ω –≤—Ä–∞–≥–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏–≥—Ä—ã
     * –í SP: —Å–æ–∑–¥–∞—ë—Ç –ª–æ–∫–∞–ª—å–Ω—ã—Ö –±–æ—Ç–æ–≤
     * –í MP: –∂–¥—ë—Ç –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–µ —Å–æ–∑–¥–∞—ë—Ç –ª–æ–∫–∞–ª—å–Ω–æ)
     */
    spawnEnemies(): void;
    
    /**
     * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–∞–≥–æ–≤ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä
     * @param deltaTime - –í—Ä–µ–º—è —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–∞–¥—Ä–∞
     */
    updateEnemies(deltaTime: number): void;
    
    /**
     * –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤—Ä–∞–≥–æ–≤
     */
    getEnemies(): EnemyTank[];
    
    /**
     * –°–æ–∑–¥–∞—Ç—å –≤—Ä–∞–≥–∞ –∏–∑ —Å–µ—Ç–µ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—Ç–æ–ª—å–∫–æ –¥–ª—è MP)
     * @param enemyData - –î–∞–Ω–Ω—ã–µ –≤—Ä–∞–≥–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞
     */
    spawnNetworkEnemy?(enemyData: EnemyData): void;
    
    /**
     * –û–±–Ω–æ–≤–∏—Ç—å –≤—Ä–∞–≥–∞ –∏–∑ —Å–µ—Ç–µ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—Ç–æ–ª—å–∫–æ –¥–ª—è MP)
     * @param enemies - –ú–∞—Å—Å–∏–≤ –¥–∞–Ω–Ω—ã—Ö –≤—Ä–∞–≥–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞
     */
    updateNetworkEnemies?(enemies: EnemyData[]): void;
    
    /**
     * –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ—Ö –≤—Ä–∞–≥–æ–≤
     */
    clearEnemies(): void;
    
    /**
     * –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–º–µ—Ä—Ç–∏ –≤—Ä–∞–≥–∞
     * @param enemy - –£–±–∏—Ç—ã–π –≤—Ä–∞–≥
     * @param killerId - ID —É–±–∏–π—Ü—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
     */
    handleEnemyDeath(enemy: EnemyTank, killerId?: string): void;
    
    /**
     * –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
     */
    isReady(): boolean;
    
    /**
     * –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
     */
    cleanup(): void;
}
```

**–§–∞–π–ª**: `src/client/game/providers/interfaces/IRewardProvider.ts`

```typescript
/**
 * –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –¥–µ–π—Å—Ç–≤–∏–µ
 */
export interface Reward {
    experience: number;
    credits: number;
    achievements?: string[]; // ID —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
    missionProgress?: { missionId: string; progress: number }[];
    battlePassXP?: number;
    dailyQuestProgress?: { questId: string; progress: number }[];
}

/**
 * –ö–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞–≥—Ä–∞–¥—ã
 */
export interface RewardContext {
    killerId: string;
    victimId: string;
    isPlayerKill: boolean; // true –µ—Å–ª–∏ —É–±–∏—Ç –∏–≥—Ä–æ–∫, false –µ—Å–ª–∏ –±–æ—Ç
    weapon?: string;
    position?: { x: number; y: number; z: number };
    damage?: number;
    isCritical?: boolean;
}

/**
 * –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞–≥—Ä–∞–¥
 * –£–Ω–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É –¥–ª—è SP (–ª–æ–∫–∞–ª—å–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ) –∏ MP (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º)
 */
export interface IRewardProvider {
    /**
     * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
     */
    initialize(dependencies: any): void;
    
    /**
     * –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ —É–±–∏–π—Å—Ç–≤–æ
     * @param context - –ö–æ–Ω—Ç–µ–∫—Å—Ç —É–±–∏–π—Å—Ç–≤–∞
     * @returns –ù–∞–≥—Ä–∞–¥–∞ (–≤ MP –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–π, –ø–æ–∫–∞ –Ω–µ –ø—Ä–∏–¥—É—Ç –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞)
     */
    awardKill(context: RewardContext): Reward;
    
    /**
     * –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ —É—Ä–æ–Ω
     * @param attackerId - ID –∞—Ç–∞–∫—É—é—â–µ–≥–æ
     * @param damage - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Ä–æ–Ω–∞
     * @param isPlayer - true –µ—Å–ª–∏ —É—Ä–æ–Ω –ø–æ –∏–≥—Ä–æ–∫—É
     * @returns –û–ø—ã—Ç –∑–∞ —É—Ä–æ–Ω
     */
    awardDamage(attackerId: string, damage: number, isPlayer: boolean): number;
    
    /**
     * –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –≤—ã–∂–∏–≤–∞–Ω–∏–µ
     * @param playerId - ID –∏–≥—Ä–æ–∫–∞
     * @param seconds - –°–µ–∫—É–Ω–¥ –≤—ã–∂–∏–≤–∞–Ω–∏—è
     * @returns –û–ø—ã—Ç –∑–∞ –≤—ã–∂–∏–≤–∞–Ω–∏–µ
     */
    awardSurvival(playerId: string, seconds: number): number;
    
    /**
     * –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –ø–æ–¥–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–∞
     * @param playerId - ID –∏–≥—Ä–æ–∫–∞
     * @param itemType - –¢–∏–ø –ø—Ä–µ–¥–º–µ—Ç–∞
     * @returns –ù–∞–≥—Ä–∞–¥–∞
     */
    awardPickup(playerId: string, itemType: string): Reward;
    
    /**
     * –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—ã
     * –í SP: –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Å—Ä–∞–∑—É
     * –í MP: –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–∞
     * @param reward - –ù–∞–≥—Ä–∞–¥–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
     * @param playerId - ID –∏–≥—Ä–æ–∫–∞
     */
    applyReward(reward: Reward, playerId: string): Promise<void>;
    
    /**
     * –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–≥—Ä–∞–¥—ã —Å —Å–µ—Ä–≤–µ—Ä–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è MP)
     * @param serverReward - –ù–∞–≥—Ä–∞–¥–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞
     */
    handleServerReward?(serverReward: {
        type: "kill" | "damage" | "survival" | "pickup" | "match_end";
        playerId: string;
        reward: Reward;
        context?: RewardContext;
    }): void;
    
    /**
     * –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
     */
    isReady(): boolean;
    
    /**
     * –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
     */
    cleanup(): void;
}
```

### –®–ê–ì 2: SP —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (LocalEnemySpawner)

**–§–∞–π–ª**: `src/client/game/providers/local/LocalEnemySpawner.ts`

```typescript
import { IEnemySpawner } from "../interfaces/IEnemySpawner";
import { GameEnemies } from "../../GameEnemies";
import type { GameSystemsAccess } from "../../GameEnemies";
import type { EnemyTank } from "../../../enemyTank";
import type { EnemyData } from "../../../../shared/types";
import { logger } from "../../../utils/logger";

/**
 * –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–ø–∞–≤–Ω –≤—Ä–∞–≥–æ–≤ –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É GameEnemies
 */
export class LocalEnemySpawner implements IEnemySpawner {
    private gameEnemies: GameEnemies;
    private systems: GameSystemsAccess | null = null;
    private initialized = false;
    
    initialize(systems: GameSystemsAccess): void {
        if (this.initialized) {
            logger.warn("[LocalEnemySpawner] Already initialized");
            return;
        }
        
        this.systems = systems;
        this.gameEnemies = new GameEnemies();
        this.gameEnemies.initialize(systems);
        this.initialized = true;
        
        logger.log("[LocalEnemySpawner] Initialized");
    }
    
    spawnEnemies(): void {
        if (!this.initialized || !this.systems) {
            logger.error("[LocalEnemySpawner] Not initialized");
            return;
        }
        
        // –ö–†–ò–¢–ò–ß–ù–û: –û–±–Ω–æ–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–¥ —Å–ø–∞–≤–Ω–æ–º (–Ω–∞ —Å–ª—É—á–∞–π –∏–∑–º–µ–Ω–µ–Ω–∏–π)
        this.gameEnemies.updateSystems(this.systems);
        
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É GameEnemies
        this.gameEnemies.spawnEnemies();
        
        logger.log(`[LocalEnemySpawner] Spawned ${this.gameEnemies.enemyTanks.length} enemies`);
    }
    
    updateEnemies(_deltaTime: number): void {
        // –í SP –≤—Ä–∞–≥–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ GameEnemies
        // –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
    }
    
    getEnemies(): EnemyTank[] {
        if (!this.gameEnemies) return [];
        return this.gameEnemies.enemyTanks;
    }
    
    clearEnemies(): void {
        if (!this.gameEnemies) return;
        
        // –£–¥–∞–ª—è–µ–º –≤—Å–µ—Ö –≤—Ä–∞–≥–æ–≤
        this.gameEnemies.enemyTanks.forEach(enemy => {
            try {
                enemy.dispose();
            } catch (e) {
                logger.error("[LocalEnemySpawner] Error disposing enemy:", e);
            }
        });
        
        this.gameEnemies.enemyTanks = [];
        logger.log("[LocalEnemySpawner] Cleared all enemies");
    }
    
    handleEnemyDeath(enemy: EnemyTank, _killerId?: string): void {
        // –í SP —Å–º–µ—Ä—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ Game.handleEnemyDeath()
        // –ó–¥–µ—Å—å —Ç–æ–ª—å–∫–æ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –º–∞—Å—Å–∏–≤–∞
        if (!this.gameEnemies) return;
        
        const index = this.gameEnemies.enemyTanks.indexOf(enemy);
        if (index !== -1) {
            this.gameEnemies.enemyTanks.splice(index, 1);
        }
    }
    
    isReady(): boolean {
        return this.initialized && this.gameEnemies !== undefined;
    }
    
    cleanup(): void {
        this.clearEnemies();
        this.systems = null;
        this.initialized = false;
    }
    
    /**
     * –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ GameEnemies (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
     */
    getGameEnemies(): GameEnemies {
        return this.gameEnemies;
    }
}
```

### –®–ê–ì 3: SP —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (LocalRewardProvider)

**–§–∞–π–ª**: `src/client/game/providers/local/LocalRewardProvider.ts`

```typescript
import { IRewardProvider, Reward, RewardContext } from "../interfaces/IRewardProvider";
import type { ExperienceSystem } from "../../../experienceSystem";
import type { CurrencyManager } from "../../../currencyManager";
import type { PlayerProgressionSystem } from "../../../playerProgression";
import type { AchievementsSystem } from "../../../achievements";
import type { MissionSystem } from "../../../missionSystem";
import type { DailyQuestsSystem } from "../../../dailyQuests";
import type { BattlePassSystem } from "../../../battlePass";
import type { PlayerStatsSystem } from "../../../playerStats";
import type { TankController } from "../../../tankController";
import type { HUD } from "../../../hud";
import { logger } from "../../../utils/logger";
import { XP_REWARDS } from "../../../experienceSystem";

interface LocalRewardDependencies {
    experienceSystem: ExperienceSystem;
    currencyManager: CurrencyManager;
    playerProgression: PlayerProgressionSystem;
    achievementsSystem: AchievementsSystem;
    missionSystem: MissionSystem;
    dailyQuestsSystem?: DailyQuestsSystem;
    battlePassSystem?: BattlePassSystem;
    playerStats?: PlayerStatsSystem;
    tank: TankController;
    hud?: HUD;
    getDifficultyMultiplier: () => number;
}

/**
 * –õ–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–∞–≥—Ä–∞–¥ –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
 * –ù–∞—á–∏—Å–ª—è–µ—Ç –Ω–∞–≥—Ä–∞–¥—ã —Å—Ä–∞–∑—É, –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º
 */
export class LocalRewardProvider implements IRewardProvider {
    private deps: LocalRewardDependencies | null = null;
    private initialized = false;
    
    initialize(dependencies: LocalRewardDependencies): void {
        if (this.initialized) {
            logger.warn("[LocalRewardProvider] Already initialized");
            return;
        }
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        if (!dependencies.experienceSystem) {
            throw new Error("[LocalRewardProvider] experienceSystem is required");
        }
        if (!dependencies.currencyManager) {
            throw new Error("[LocalRewardProvider] currencyManager is required");
        }
        if (!dependencies.playerProgression) {
            throw new Error("[LocalRewardProvider] playerProgression is required");
        }
        if (!dependencies.tank) {
            throw new Error("[LocalRewardProvider] tank is required");
        }
        
        this.deps = dependencies;
        this.initialized = true;
        
        logger.log("[LocalRewardProvider] Initialized");
    }
    
    awardKill(context: RewardContext): Reward {
        if (!this.initialized || !this.deps) {
            logger.error("[LocalRewardProvider] Not initialized");
            return { experience: 0, credits: 0 };
        }
        
        const { killerId, isPlayerKill } = context;
        
        // –ë–∞–∑–æ–≤—ã–µ –Ω–∞–≥—Ä–∞–¥—ã
        const baseExperience = isPlayerKill ? 100 : XP_REWARDS.KILL_TANK;
        const baseCredits = isPlayerKill ? 200 : 100;
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º –º–Ω–æ–∂–∏—Ç–µ–ª—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
        const multiplier = this.deps.getDifficultyMultiplier();
        const credits = Math.round(baseCredits * multiplier);
        
        // –ù–∞—á–∏—Å–ª—è–µ–º –æ–ø—ã—Ç
        if (this.deps.experienceSystem && this.deps.tank) {
            this.deps.experienceSystem.recordKill(
                this.deps.tank.chassisType.id,
                this.deps.tank.cannonType.id,
                false // isTurret
            );
        }
        
        // –ù–∞—á–∏—Å–ª—è–µ–º –∫—Ä–µ–¥–∏—Ç—ã
        if (this.deps.currencyManager) {
            this.deps.currencyManager.addCurrency(credits);
            if (this.deps.hud) {
                this.deps.hud.setCurrency(this.deps.currencyManager.getCurrency());
                this.deps.hud.showMessage(`+${credits} –∫—Ä–µ–¥–∏—Ç–æ–≤!`, "#ffaa00", 2000);
            }
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
        if (this.deps.playerProgression) {
            this.deps.playerProgression.recordKill();
            this.deps.playerProgression.addCredits(credits);
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        const achievements: string[] = [];
        if (this.deps.achievementsSystem) {
            this.deps.achievementsSystem.updateProgress("first_blood", 1);
            this.deps.achievementsSystem.updateProgress("tank_hunter", 1);
            this.deps.achievementsSystem.updateProgress("tank_ace", 1);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
            // (–ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ AchievementsSystem)
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –º–∏—Å—Å–∏–∏
        const missionProgress: { missionId: string; progress: number }[] = [];
        if (this.deps.missionSystem) {
            this.deps.missionSystem.updateProgress("kill", 1);
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
        if (this.deps.dailyQuestsSystem) {
            this.deps.dailyQuestsSystem.updateProgress("daily_kills", 1);
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –±–æ–µ–≤–æ–π –ø—Ä–æ–ø—É—Å–∫
        if (this.deps.battlePassSystem) {
            this.deps.battlePassSystem.addExperience(25);
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        if (this.deps.playerStats) {
            this.deps.playerStats.recordKill();
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º HUD
        if (this.deps.hud) {
            this.deps.hud.addKill();
        }
        
        const reward: Reward = {
            experience: baseExperience,
            credits,
            achievements,
            missionProgress,
            battlePassXP: 25,
            dailyQuestProgress: [{ questId: "daily_kills", progress: 1 }]
        };
        
        logger.log(`[LocalRewardProvider] Awarded kill: ${credits} credits, ${baseExperience} XP`);
        
        return reward;
    }
    
    awardDamage(_attackerId: string, damage: number, _isPlayer: boolean): number {
        if (!this.initialized || !this.deps) return 0;
        
        const experience = Math.round(damage * XP_REWARDS.DAMAGE_DEALT);
        
        // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —É—Ä–æ–Ω –≤ ExperienceSystem
        if (this.deps.experienceSystem && this.deps.tank) {
            // –õ–æ–≥–∏–∫–∞ –∑–∞–ø–∏—Å–∏ —É—Ä–æ–Ω–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –º–µ—Ç–æ–¥ –≤ ExperienceSystem)
        }
        
        return experience;
    }
    
    awardSurvival(_playerId: string, seconds: number): number {
        if (!this.initialized) return 0;
        
        return Math.round((seconds / 60) * XP_REWARDS.SURVIVAL_MINUTE);
    }
    
    awardPickup(_playerId: string, itemType: string): Reward {
        if (!this.initialized || !this.deps) {
            return { experience: 0, credits: 0 };
        }
        
        const rewards: Record<string, { exp: number; credits: number }> = {
            ammo: { exp: XP_REWARDS.PICKUP_COLLECTED, credits: 10 },
            health: { exp: XP_REWARDS.PICKUP_COLLECTED, credits: 15 },
            // –î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤
        };
        
        const reward = rewards[itemType] || { exp: 0, credits: 0 };
        
        // –ù–∞—á–∏—Å–ª—è–µ–º —Å—Ä–∞–∑—É
        if (this.deps.experienceSystem && this.deps.tank) {
            // –î–æ–±–∞–≤–∏—Ç—å –æ–ø—ã—Ç –∑–∞ –ø–æ–¥–±–æ—Ä
        }
        
        if (this.deps.currencyManager) {
            this.deps.currencyManager.addCurrency(reward.credits);
        }
        
        return {
            experience: reward.exp,
            credits: reward.credits
        };
    }
    
    async applyReward(reward: Reward, _playerId: string): Promise<void> {
        // –í SP –Ω–∞–≥—Ä–∞–¥—ã —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ awardKill()
        // –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
        logger.log(`[LocalRewardProvider] Reward applied: ${reward.credits} credits, ${reward.experience} XP`);
    }
    
    isReady(): boolean {
        return this.initialized && this.deps !== null;
    }
    
    cleanup(): void {
        this.deps = null;
        this.initialized = false;
    }
}
```

### –®–ê–ì 4: MP —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (NetworkEnemySpawner)

**–§–∞–π–ª**: `src/client/game/providers/network/NetworkEnemySpawner.ts`

```typescript
import { IEnemySpawner } from "../interfaces/IEnemySpawner";
import { GameEnemies } from "../../GameEnemies";
import type { GameSystemsAccess } from "../../GameEnemies";
import type { EnemyTank } from "../../../enemyTank";
import type { EnemyData } from "../../../../shared/types";
import type { MultiplayerManager } from "../../../multiplayer";
import { logger } from "../../../utils/logger";

/**
 * –°–µ—Ç–µ–≤–æ–π —Å–ø–∞–≤–Ω –≤—Ä–∞–≥–æ–≤ –¥–ª—è –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
 * –ë–æ—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ ENEMY_UPDATE
 */
export class NetworkEnemySpawner implements IEnemySpawner {
    private gameEnemies: GameEnemies;
    private systems: GameSystemsAccess | null = null;
    private multiplayerManager: MultiplayerManager | null = null;
    private networkEnemies: Map<string, EnemyTank> = new Map();
    private initialized = false;
    
    initialize(systems: GameSystemsAccess & { multiplayerManager?: MultiplayerManager }): void {
        if (this.initialized) {
            logger.warn("[NetworkEnemySpawner] Already initialized");
            return;
        }
        
        if (!systems.multiplayerManager) {
            throw new Error("[NetworkEnemySpawner] multiplayerManager is required");
        }
        
        this.systems = systems;
        this.multiplayerManager = systems.multiplayerManager;
        
        // –°–æ–∑–¥–∞—ë–º GameEnemies –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–≤
        this.gameEnemies = new GameEnemies();
        this.gameEnemies.initialize(systems);
        
        // –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ —Å–µ—Ç–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è
        this.setupNetworkCallbacks();
        
        this.initialized = true;
        logger.log("[NetworkEnemySpawner] Initialized");
    }
    
    private setupNetworkCallbacks(): void {
        if (!this.multiplayerManager) return;
        
        // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ ENEMY_UPDATE
        this.multiplayerManager.onEnemyUpdate((data) => {
            this.handleEnemyUpdate(data);
        });
        
        logger.log("[NetworkEnemySpawner] Network callbacks setup");
    }
    
    private handleEnemyUpdate(data: { enemies?: EnemyData[] }): void {
        if (!data.enemies || !this.gameEnemies) return;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≤—Ä–∞–≥–æ–≤ –∏–ª–∏ —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã—Ö
        this.gameEnemies.updateNetworkEnemies(data.enemies);
        
        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –º–∞–ø—É —Å–µ—Ç–µ–≤—ã—Ö –≤—Ä–∞–≥–æ–≤
        data.enemies.forEach(enemyData => {
            if (enemyData.isAlive) {
                const existing = this.gameEnemies.enemyTanks.find(
                    e => (e as any).networkId === enemyData.id
                );
                if (existing) {
                    this.networkEnemies.set(enemyData.id, existing);
                } else {
                    // –°–æ–∑–¥–∞—ë–º –Ω–æ–≤–æ–≥–æ –≤—Ä–∞–≥–∞
                    this.spawnNetworkEnemy(enemyData);
                }
            } else {
                // –í—Ä–∞–≥ —É–±–∏—Ç - —É–¥–∞–ª—è–µ–º
                const enemy = this.networkEnemies.get(enemyData.id);
                if (enemy) {
                    this.handleEnemyDeath(enemy);
                }
            }
        });
    }
    
    spawnEnemies(): void {
        // –í MP –Ω–µ —Å–ø–∞–≤–Ω–∏–º –ª–æ–∫–∞–ª—å–Ω–æ - –∂–¥—ë–º –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞
        // –ë–æ—Ç—ã –ø—Ä–∏–¥—É—Ç —á–µ—Ä–µ–∑ GAME_START (enemies –≤ –¥–∞–Ω–Ω—ã—Ö) –∏–ª–∏ ENEMY_UPDATE
        logger.log("[NetworkEnemySpawner] Waiting for network enemies from server");
    }
    
    spawnNetworkEnemy(enemyData: EnemyData): void {
        if (!this.gameEnemies || !enemyData.isAlive) return;
        
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º GameEnemies –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
        this.gameEnemies.spawnNetworkEnemies([enemyData]);
        
        // –ù–∞—Ö–æ–¥–∏–º —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –≤—Ä–∞–≥–∞ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –º–∞–ø—É
        const enemy = this.gameEnemies.enemyTanks.find(
            e => (e as any).networkId === enemyData.id
        );
        
        if (enemy) {
            this.networkEnemies.set(enemyData.id, enemy);
            logger.log(`[NetworkEnemySpawner] Spawned network enemy ${enemyData.id}`);
        } else {
            logger.warn(`[NetworkEnemySpawner] Failed to spawn network enemy ${enemyData.id}`);
        }
    }
    
    updateNetworkEnemies(enemies: EnemyData[]): void {
        if (!this.gameEnemies) return;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —á–µ—Ä–µ–∑ GameEnemies
        this.gameEnemies.updateNetworkEnemies(enemies);
        
        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –º–∞–ø—É
        enemies.forEach(enemyData => {
            if (enemyData.isAlive) {
                const enemy = this.gameEnemies.enemyTanks.find(
                    e => (e as any).networkId === enemyData.id
                );
                if (enemy) {
                    this.networkEnemies.set(enemyData.id, enemy);
                }
            }
        });
    }
    
    updateEnemies(_deltaTime: number): void {
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–µ—Ç–µ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        // –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ GameEnemies
    }
    
    getEnemies(): EnemyTank[] {
        return Array.from(this.networkEnemies.values());
    }
    
    clearEnemies(): void {
        this.networkEnemies.forEach(enemy => {
            try {
                enemy.dispose();
            } catch (e) {
                logger.error("[NetworkEnemySpawner] Error disposing enemy:", e);
            }
        });
        
        this.networkEnemies.clear();
        
        if (this.gameEnemies) {
            this.gameEnemies.enemyTanks.forEach(enemy => enemy.dispose());
            this.gameEnemies.enemyTanks = [];
        }
        
        logger.log("[NetworkEnemySpawner] Cleared all enemies");
    }
    
    handleEnemyDeath(enemy: EnemyTank, _killerId?: string): void {
        // –í MP —Å–º–µ—Ä—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º
        // –ó–¥–µ—Å—å —Ç–æ–ª—å–∫–æ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –º–∞–ø—ã
        const networkId = (enemy as any).networkId;
        if (networkId) {
            this.networkEnemies.delete(networkId);
        }
        
        // –£–¥–∞–ª—è–µ–º –∏–∑ GameEnemies
        if (this.gameEnemies) {
            const index = this.gameEnemies.enemyTanks.indexOf(enemy);
            if (index !== -1) {
                this.gameEnemies.enemyTanks.splice(index, 1);
            }
        }
    }
    
    isReady(): boolean {
        return this.initialized && 
               this.multiplayerManager !== null && 
               this.gameEnemies !== undefined;
    }
    
    cleanup(): void {
        this.clearEnemies();
        
        // –û—Ç–ø–∏—Å—ã–≤–∞–µ–º—Å—è –æ—Ç —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π
        // (–µ—Å–ª–∏ MultiplayerManager –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–ø–∏—Å–∫—É)
        
        this.systems = null;
        this.multiplayerManager = null;
        this.initialized = false;
    }
    
    /**
     * –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ GameEnemies (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
     */
    getGameEnemies(): GameEnemies {
        return this.gameEnemies;
    }
}
```

### –®–ê–ì 5: MP —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (NetworkRewardProvider)

**–§–∞–π–ª**: `src/client/game/providers/network/NetworkRewardProvider.ts`

```typescript
import { IRewardProvider, Reward, RewardContext } from "../interfaces/IRewardProvider";
import type { MultiplayerManager } from "../../../multiplayer";
import type { ExperienceSystem } from "../../../experienceSystem";
import type { CurrencyManager } from "../../../currencyManager";
import type { PlayerProgressionSystem } from "../../../playerProgression";
import type { AchievementsSystem } from "../../../achievements";
import type { MissionSystem } from "../../../missionSystem";
import type { DailyQuestsSystem } from "../../../dailyQuests";
import type { BattlePassSystem } from "../../../battlePass";
import type { PlayerStatsSystem } from "../../../playerStats";
import type { HUD } from "../../../hud";
import { logger } from "../../../utils/logger";
import { ServerMessageType } from "../../../../shared/messages";

interface NetworkRewardDependencies {
    multiplayerManager: MultiplayerManager;
    experienceSystem: ExperienceSystem;
    currencyManager: CurrencyManager;
    playerProgression: PlayerProgressionSystem;
    achievementsSystem: AchievementsSystem;
    missionSystem: MissionSystem;
    dailyQuestsSystem?: DailyQuestsSystem;
    battlePassSystem?: BattlePassSystem;
    playerStats?: PlayerStatsSystem;
    hud?: HUD;
}

/**
 * –°–µ—Ç–µ–≤–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–∞–≥—Ä–∞–¥ –¥–ª—è –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
 * –ù–∞–≥—Ä–∞–¥—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º –∏ –ø—Ä–∏—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ REWARD —Å–æ–æ–±—â–µ–Ω–∏—è
 */
export class NetworkRewardProvider implements IRewardProvider {
    private deps: NetworkRewardDependencies | null = null;
    private initialized = false;
    private pendingRewards: Map<string, Reward> = new Map();
    
    initialize(dependencies: NetworkRewardDependencies): void {
        if (this.initialized) {
            logger.warn("[NetworkRewardProvider] Already initialized");
            return;
        }
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        if (!dependencies.multiplayerManager) {
            throw new Error("[NetworkRewardProvider] multiplayerManager is required");
        }
        if (!dependencies.experienceSystem) {
            throw new Error("[NetworkRewardProvider] experienceSystem is required");
        }
        if (!dependencies.currencyManager) {
            throw new Error("[NetworkRewardProvider] currencyManager is required");
        }
        if (!dependencies.playerProgression) {
            throw new Error("[NetworkRewardProvider] playerProgression is required");
        }
        
        this.deps = dependencies;
        this.setupNetworkCallbacks();
        this.initialized = true;
        
        logger.log("[NetworkRewardProvider] Initialized");
    }
    
    private setupNetworkCallbacks(): void {
        if (!this.deps || !this.deps.multiplayerManager) return;
        
        // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ PLAYER_KILLED –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–≥—Ä–∞–¥
        this.deps.multiplayerManager.onPlayerKilled((data) => {
            const localPlayerId = this.deps!.multiplayerManager!.getPlayerId();
            if (data.killerId === localPlayerId) {
                // –ò–≥—Ä–æ–∫ —É–±–∏–ª –∫–æ–≥–æ-—Ç–æ - –∂–¥—ë–º –Ω–∞–≥—Ä–∞–¥—É —Å —Å–µ—Ä–≤–µ—Ä–∞
                // –ù–∞–≥—Ä–∞–¥–∞ –ø—Ä–∏–¥–µ—Ç —á–µ—Ä–µ–∑ REWARD —Å–æ–æ–±—â–µ–Ω–∏–µ
                logger.log(`[NetworkRewardProvider] Player ${localPlayerId} killed ${data.victimId}, waiting for server reward`);
            }
        });
        
        // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ REWARD —Å–æ–æ–±—â–µ–Ω–∏—è (–±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ MultiplayerManager)
        // this.deps.multiplayerManager.onReward((data) => {
        //     this.handleServerReward({
        //         type: data.type,
        //         playerId: data.playerId,
        //         reward: data.reward,
        //         context: data.context
        //     });
        // });
        
        logger.log("[NetworkRewardProvider] Network callbacks setup");
    }
    
    awardKill(context: RewardContext): Reward {
        // –í MP –Ω–∞–≥—Ä–∞–¥—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –Ω–∞–≥—Ä–∞–¥—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–µ—Ä–≤–µ—Ä–æ–º
        const tempReward: Reward = {
            experience: 0, // –ë—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Å–µ—Ä–≤–µ—Ä–æ–º
            credits: 0,
            achievements: [],
            missionProgress: []
        };
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
        const key = `${context.killerId}_${context.victimId}`;
        this.pendingRewards.set(key, tempReward);
        
        logger.log(`[NetworkRewardProvider] Temporary reward saved for ${key}, waiting for server`);
        
        return tempReward;
    }
    
    awardDamage(_attackerId: string, _damage: number, _isPlayer: boolean): number {
        // –í MP –æ–ø—ã—Ç –∑–∞ —É—Ä–æ–Ω –º–æ–∂–µ—Ç –Ω–∞—á–∏—Å–ª—è—Ç—å—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º 0, –æ–ø—ã—Ç –ø—Ä–∏–¥–µ—Ç —á–µ—Ä–µ–∑ REWARD —Å–æ–æ–±—â–µ–Ω–∏–µ
        return 0;
    }
    
    awardSurvival(_playerId: string, _seconds: number): number {
        // –ù–∞—á–∏—Å–ª—è–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º
        return 0;
    }
    
    awardPickup(_playerId: string, _itemType: string): Reward {
        // –ù–∞—á–∏—Å–ª—è–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º
        return { experience: 0, credits: 0 };
    }
    
    async applyReward(reward: Reward, playerId: string): Promise<void> {
        if (!this.initialized || !this.deps) {
            logger.error("[NetworkRewardProvider] Not initialized");
            return;
        }
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞–≥—Ä–∞–¥—ã, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞
        logger.log(`[NetworkRewardProvider] Applying reward for ${playerId}: ${reward.credits} credits, ${reward.experience} XP`);
        
        // –ù–∞—á–∏—Å–ª—è–µ–º –æ–ø—ã—Ç
        if (this.deps.experienceSystem && reward.experience > 0) {
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–ø—ã—Ç —á–µ—Ä–µ–∑ PlayerProgression
            this.deps.playerProgression.addExperience(reward.experience);
        }
        
        // –ù–∞—á–∏—Å–ª—è–µ–º –∫—Ä–µ–¥–∏—Ç—ã
        if (this.deps.currencyManager && reward.credits > 0) {
            this.deps.currencyManager.addCurrency(reward.credits);
            if (this.deps.hud) {
                this.deps.hud.setCurrency(this.deps.currencyManager.getCurrency());
                this.deps.hud.showMessage(`+${reward.credits} –∫—Ä–µ–¥–∏—Ç–æ–≤!`, "#ffaa00", 2000);
            }
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
        if (this.deps.playerProgression) {
            if (reward.experience > 0) {
                this.deps.playerProgression.addExperience(reward.experience);
            }
            if (reward.credits > 0) {
                this.deps.playerProgression.addCredits(reward.credits);
            }
        }
        
        // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        if (reward.achievements && this.deps.achievementsSystem) {
            reward.achievements.forEach(achievementId => {
                // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å –º–µ—Ç–æ–¥)
                logger.log(`[NetworkRewardProvider] Achievement unlocked: ${achievementId}`);
            });
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –º–∏—Å—Å–∏–π
        if (reward.missionProgress && this.deps.missionSystem) {
            reward.missionProgress.forEach(({ missionId, progress }) => {
                this.deps.missionSystem.updateProgress(missionId, progress);
            });
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
        if (reward.dailyQuestProgress && this.deps.dailyQuestsSystem) {
            reward.dailyQuestProgress.forEach(({ questId, progress }) => {
                this.deps.dailyQuestsSystem!.updateProgress(questId, progress);
            });
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –±–æ–µ–≤–æ–π –ø—Ä–æ–ø—É—Å–∫
        if (reward.battlePassXP && this.deps.battlePassSystem) {
            this.deps.battlePassSystem.addExperience(reward.battlePassXP);
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        if (this.deps.playerStats) {
            this.deps.playerStats.recordKill();
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º HUD
        if (this.deps.hud) {
            this.deps.hud.addKill();
        }
    }
    
    handleServerReward(serverReward: {
        type: "kill" | "damage" | "survival" | "pickup" | "match_end";
        playerId: string;
        reward: Reward;
        context?: RewardContext;
    }): void {
        if (!this.initialized) {
            logger.error("[NetworkRewardProvider] Not initialized");
            return;
        }
        
        logger.log(`[NetworkRewardProvider] Received server reward: type=${serverReward.type}, player=${serverReward.playerId}`);
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞–≥—Ä–∞–¥—É
        this.applyReward(serverReward.reward, serverReward.playerId);
        
        // –£–¥–∞–ª—è–µ–º –∏–∑ pending –µ—Å–ª–∏ –µ—Å—Ç—å
        if (serverReward.context) {
            const key = `${serverReward.context.killerId}_${serverReward.context.victimId}`;
            this.pendingRewards.delete(key);
        }
    }
    
    isReady(): boolean {
        return this.initialized && 
               this.deps !== null && 
               this.deps.multiplayerManager !== null;
    }
    
    cleanup(): void {
        this.pendingRewards.clear();
        this.deps = null;
        this.initialized = false;
    }
}
```

### –®–ê–ì 6: –§–∞–±—Ä–∏–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

**–§–∞–π–ª**: `src/client/game/providers/ProviderFactory.ts`

```typescript
import { IEnemySpawner } from "./interfaces/IEnemySpawner";
import { IRewardProvider } from "./interfaces/IRewardProvider";
import { LocalEnemySpawner } from "./local/LocalEnemySpawner";
import { NetworkEnemySpawner } from "./network/NetworkEnemySpawner";
import { LocalRewardProvider } from "./local/LocalRewardProvider";
import { NetworkRewardProvider } from "./network/NetworkRewardProvider";
import type { GameSystemsAccess } from "../GameEnemies";
import type { MultiplayerManager } from "../../multiplayer";
import type { ExperienceSystem } from "../../experienceSystem";
import type { CurrencyManager } from "../../currencyManager";
import type { PlayerProgressionSystem } from "../../playerProgression";
import type { AchievementsSystem } from "../../achievements";
import type { MissionSystem } from "../../missionSystem";
import type { DailyQuestsSystem } from "../../dailyQuests";
import type { BattlePassSystem } from "../../battlePass";
import type { PlayerStatsSystem } from "../../playerStats";
import type { TankController } from "../../tankController";
import type { HUD } from "../../hud";
import { logger } from "../../utils/logger";

export interface EnemySpawnerDependencies {
    systems: GameSystemsAccess;
    multiplayerManager?: MultiplayerManager;
}

export interface RewardProviderDependencies {
    experienceSystem: ExperienceSystem;
    currencyManager: CurrencyManager;
    playerProgression: PlayerProgressionSystem;
    achievementsSystem: AchievementsSystem;
    missionSystem: MissionSystem;
    dailyQuestsSystem?: DailyQuestsSystem;
    battlePassSystem?: BattlePassSystem;
    playerStats?: PlayerStatsSystem;
    tank: TankController;
    hud?: HUD;
    multiplayerManager?: MultiplayerManager;
    getDifficultyMultiplier: () => number;
}

/**
 * –§–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
 * –í—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞ –∏–≥—Ä—ã
 */
export class ProviderFactory {
    /**
     * –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å–ø–∞–≤–Ω–∞ –≤—Ä–∞–≥–æ–≤
     */
    static createEnemySpawner(
        isMultiplayer: boolean,
        deps: EnemySpawnerDependencies
    ): IEnemySpawner {
        try {
            if (isMultiplayer && deps.multiplayerManager) {
                logger.log("[ProviderFactory] Creating NetworkEnemySpawner");
                const spawner = new NetworkEnemySpawner();
                spawner.initialize({
                    ...deps.systems,
                    multiplayerManager: deps.multiplayerManager
                });
                return spawner;
            } else {
                logger.log("[ProviderFactory] Creating LocalEnemySpawner");
                const spawner = new LocalEnemySpawner();
                spawner.initialize(deps.systems);
                return spawner;
            }
        } catch (error) {
            logger.error("[ProviderFactory] Error creating EnemySpawner:", error);
            // Fallback –Ω–∞ LocalEnemySpawner
            const spawner = new LocalEnemySpawner();
            spawner.initialize(deps.systems);
            return spawner;
        }
    }
    
    /**
     * –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–∞–≥—Ä–∞–¥
     */
    static createRewardProvider(
        isMultiplayer: boolean,
        deps: RewardProviderDependencies
    ): IRewardProvider {
        try {
            if (isMultiplayer && deps.multiplayerManager) {
                logger.log("[ProviderFactory] Creating NetworkRewardProvider");
                const provider = new NetworkRewardProvider();
                provider.initialize({
                    multiplayerManager: deps.multiplayerManager,
                    experienceSystem: deps.experienceSystem,
                    currencyManager: deps.currencyManager,
                    playerProgression: deps.playerProgression,
                    achievementsSystem: deps.achievementsSystem,
                    missionSystem: deps.missionSystem,
                    dailyQuestsSystem: deps.dailyQuestsSystem,
                    battlePassSystem: deps.battlePassSystem,
                    playerStats: deps.playerStats,
                    hud: deps.hud
                });
                return provider;
            } else {
                logger.log("[ProviderFactory] Creating LocalRewardProvider");
                const provider = new LocalRewardProvider();
                provider.initialize({
                    experienceSystem: deps.experienceSystem,
                    currencyManager: deps.currencyManager,
                    playerProgression: deps.playerProgression,
                    achievementsSystem: deps.achievementsSystem,
                    missionSystem: deps.missionSystem,
                    dailyQuestsSystem: deps.dailyQuestsSystem,
                    battlePassSystem: deps.battlePassSystem,
                    playerStats: deps.playerStats,
                    tank: deps.tank,
                    hud: deps.hud,
                    getDifficultyMultiplier: deps.getDifficultyMultiplier
                });
                return provider;
            }
        } catch (error) {
            logger.error("[ProviderFactory] Error creating RewardProvider:", error);
            // Fallback –Ω–∞ LocalRewardProvider
            const provider = new LocalRewardProvider();
            provider.initialize({
                experienceSystem: deps.experienceSystem,
                currencyManager: deps.currencyManager,
                playerProgression: deps.playerProgression,
                achievementsSystem: deps.achievementsSystem,
                missionSystem: deps.missionSystem,
                dailyQuestsSystem: deps.dailyQuestsSystem,
                battlePassSystem: deps.battlePassSystem,
                playerStats: deps.playerStats,
                tank: deps.tank,
                hud: deps.hud,
                getDifficultyMultiplier: deps.getDifficultyMultiplier
            });
            return provider;
        }
    }
}
```

---

## üìã –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏

### –≠–¢–ê–ü 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è (1 –¥–µ–Ω—å)

**–¶–µ–ª—å**: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–±–æ—á–µ–≥–æ –∫–æ–¥–∞

**–®–∞–≥–∏**:

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ `src/client/game/providers/`
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ `interfaces/`
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç—ã –≤ `index.ts` —Ñ–∞–π–ª—ã
4. ‚úÖ **–ü–†–û–í–ï–†–ö–ê**: –ö–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ –æ—à–∏–±–æ–∫

**–í–∞–ª–∏–¥–∞—Ü–∏—è**:

- [ ] `npm run build` –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ù–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

---

### –≠–¢–ê–ü 1: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è SP –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (2-3 –¥–Ω—è)

**–¶–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å SP —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–µ —Ç—Ä–æ–≥–∞—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥

**–®–∞–≥–∏**:

1. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `LocalEnemySpawner` (–æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ `GameEnemies`)
2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `LocalRewardProvider` (–≤—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –∏–∑ `handleEnemyDeath`)
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
4. ‚úÖ **–ü–†–û–í–ï–†–ö–ê**: SP –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ

**–í–∞–ª–∏–¥–∞—Ü–∏—è**:

- [ ] `LocalEnemySpawner` —Å–æ–∑–¥–∞—ë—Ç –≤—Ä–∞–≥–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] `LocalRewardProvider` –Ω–∞—á–∏—Å–ª—è–µ—Ç –Ω–∞–≥—Ä–∞–¥—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏

**–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π**:

```typescript
// –¢–µ—Å—Ç LocalEnemySpawner
const spawner = new LocalEnemySpawner();
spawner.initialize(mockSystems);
spawner.spawnEnemies();
assert(spawner.getEnemies().length > 0);

// –¢–µ—Å—Ç LocalRewardProvider
const provider = new LocalRewardProvider();
provider.initialize(mockDeps);
const reward = provider.awardKill({
    killerId: "player1",
    victimId: "enemy1",
    isPlayerKill: false
});
assert(reward.credits > 0);
assert(reward.experience > 0);
```

---

### –≠–¢–ê–ü 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è SP –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (1-2 –¥–Ω—è)

**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å SP –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –≤ Game.ts –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å–æ —Å—Ç–∞—Ä—ã–º –∫–æ–¥–æ–º

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `src/client/game.ts`:**

**–°—Ç—Ä–æ–∫–∞ ~3200** (–ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º):

```typescript
// –ù–û–í–û–ï: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å–æ —Å—Ç–∞—Ä—ã–º –∫–æ–¥–æ–º)
private enemySpawner: IEnemySpawner | undefined;
private rewardProvider: IRewardProvider | undefined;

private initializeProviders(): void {
    // –°–æ–∑–¥–∞—ë–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Ç–æ–ª—å–∫–æ –≤ SP —Ä–µ–∂–∏–º–µ (–¥–ª—è –Ω–∞—á–∞–ª–∞)
    if (!this.isMultiplayer) {
        const spawnerDeps: EnemySpawnerDependencies = {
            systems: {
                scene: this.scene,
                tank: this.tank,
                soundManager: this.soundManager,
                effectsManager: this.effectsManager,
                chunkSystem: this.chunkSystem,
                hud: this.hud,
                currencyManager: this.currencyManager,
                experienceSystem: this.experienceSystem,
                playerProgression: this.playerProgression,
                achievementsSystem: this.achievementsSystem,
                missionSystem: this.missionSystem,
                currentMapType: this.currentMapType,
                gameStarted: this.gameStarted,
                survivalStartTime: this.survivalStartTime,
                isMultiplayer: false
            }
        };
        
        const rewardDeps: RewardProviderDependencies = {
            experienceSystem: this.experienceSystem!,
            currencyManager: this.currencyManager!,
            playerProgression: this.playerProgression!,
            achievementsSystem: this.achievementsSystem!,
            missionSystem: this.missionSystem!,
            dailyQuestsSystem: this.dailyQuestsSystem,
            battlePassSystem: this.battlePassSystem,
            playerStats: this.playerStats,
            tank: this.tank!,
            hud: this.hud,
            getDifficultyMultiplier: () => this.getDifficultyRewardMultiplier()
        };
        
        this.enemySpawner = ProviderFactory.createEnemySpawner(false, spawnerDeps);
        this.rewardProvider = ProviderFactory.createRewardProvider(false, rewardDeps);
        
        logger.log("[Game] Providers initialized for SP mode");
    }
}
```

**–°—Ç—Ä–æ–∫–∞ ~3865** (–º–µ—Ç–æ–¥ `spawnEnemyTanks`):

```typescript
spawnEnemyTanks() {
    logger.log(`[Game] spawnEnemyTanks() called - mapType: ${this.currentMapType}, gameStarted: ${this.gameStarted}, isMultiplayer: ${this.isMultiplayer}`);

    // –ù–û–í–û–ï: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
    if (!this.isMultiplayer && this.enemySpawner) {
        logger.log("[Game] Using EnemySpawner provider");
        this.enemySpawner.spawnEnemies();
        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
        if (this.enemySpawner instanceof LocalEnemySpawner) {
            this.enemyTanks = this.enemySpawner.getGameEnemies().enemyTanks;
        }
        return;
    }
    
    // –°–¢–ê–†–´–ô –ö–û–î: –û—Å—Ç–∞–≤–ª—è–µ–º –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
    if (this.isMultiplayer) {
        logger.log("[Game] Multiplayer mode: Enemy bots disabled, using real players instead");
        return;
    }
    
    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ä—ã–π –∫–æ–¥ ...
}
```

**–°—Ç—Ä–æ–∫–∞ ~5071** (–º–µ—Ç–æ–¥ `handleEnemyDeath`):

```typescript
private handleEnemyDeath(enemy: EnemyTank): void {
    logger.log("[GAME] Enemy tank destroyed! Adding kill...");

    // –ù–û–í–û–ï: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
    if (!this.isMultiplayer && this.rewardProvider) {
        logger.log("[Game] Using RewardProvider for kill reward");
        
        const localPlayerId = "local"; // –í SP –≤—Å–µ–≥–¥–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–≥—Ä–æ–∫
        const context: RewardContext = {
            killerId: localPlayerId,
            victimId: (enemy as any).id || "enemy",
            isPlayerKill: false,
            position: enemy.chassis?.position ? {
                x: enemy.chassis.position.x,
                y: enemy.chassis.position.y,
                z: enemy.chassis.position.z
            } : undefined
        };
        
        const reward = this.rewardProvider.awardKill(context);
        this.rewardProvider.applyReward(reward, localPlayerId);
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–º–µ—Ä—Ç–∏ –≤—Ä–∞–≥–∞ —á–µ—Ä–µ–∑ spawner
        if (this.enemySpawner) {
            this.enemySpawner.handleEnemyDeath(enemy);
        }
        
        // –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ (AI Coordinator, —Ä–µ—Å–ø–∞–≤–Ω) –æ—Å—Ç–∞—ë—Ç—Å—è
        if (this.aiCoordinator) {
            this.aiCoordinator.unregisterBot(enemy.getId().toString());
        }
        
        // –†–µ—Å–ø–∞–≤–Ω –ª–æ–≥–∏–∫–∞ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
        const pos = enemy.chassis?.position || Vector3.Zero();
        // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ —Ä–µ—Å–ø–∞–≤–Ω–∞ ...
        
        return; // –í—ã—Ö–æ–¥–∏–º —Ä–∞–Ω—å—à–µ, –Ω–µ –≤—ã–ø–æ–ª–Ω—è—è —Å—Ç–∞—Ä—ã–π –∫–æ–¥
    }
    
    // –°–¢–ê–†–´–ô –ö–û–î: –û—Å—Ç–∞–≤–ª—è–µ–º –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
    if (this.hud) {
        this.hud.addKill();
    }
    // ... –≤–µ—Å—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è**:

- [ ] SP —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- [ ] –ù–∞–≥—Ä–∞–¥—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –í—Ä–∞–≥–∏ —Å–ø–∞–≤–Ω—è—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

**–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π**:

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å SP –∏–≥—Ä—É
2. –£–±–∏—Ç—å –≤—Ä–∞–≥–∞
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –Ω–∞–≥—Ä–∞–¥—ã –Ω–∞—á–∏—Å–ª–µ–Ω—ã, –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è (–ø–æ –ª–æ–≥–∞–º)

---

### –≠–¢–ê–ü 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ REWARD —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (1 –¥–µ–Ω—å)

**–¶–µ–ª—å**: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–≥—Ä–∞–¥ —Å —Å–µ—Ä–≤–µ—Ä–∞

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `src/shared/messages.ts`:**

**–°—Ç—Ä–æ–∫–∞ ~148** (–ø–æ—Å–ª–µ `BATCH = "batch"`):

```typescript
export enum ServerMessageType {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ ...
    REWARD = "reward", // –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –Ω–∞–≥—Ä–∞–¥
}

// –°—Ç—Ä–æ–∫–∞ ~348 (–ø–æ—Å–ª–µ –¥—Ä—É–≥–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤):
export interface RewardData {
    type: "kill" | "damage" | "survival" | "pickup" | "match_end";
    playerId: string;
    reward: {
        experience: number;
        credits: number;
        achievements?: string[];
        missionProgress?: { missionId: string; progress: number }[];
        battlePassXP?: number;
        dailyQuestProgress?: { questId: string; progress: number }[];
    };
    context?: {
        killerId?: string;
        victimId?: string;
        isPlayerKill?: boolean;
        weapon?: string;
        position?: { x: number; y: number; z: number };
    };
}
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `src/server/gameServer.ts`:**

**–°—Ç—Ä–æ–∫–∞ ~1434** (–ø–æ—Å–ª–µ `PLAYER_KILLED`):

```typescript
if (lastDamageEvent.died) {
    // Player died
    this.broadcastToRoom(room, createServerMessage(ServerMessageType.PLAYER_KILLED, {
        victimId: lastDamageEvent.victimId,
        victimName: lastDamageEvent.victimName,
        killerId: lastDamageEvent.attackerId,
        killerName: lastDamageEvent.attackerName
    }));
    
    // –ù–û–í–û–ï: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞–≥—Ä–∞–¥—ã —É–±–∏–π—Ü–µ
    const killer = room.getPlayer(lastDamageEvent.attackerId);
    if (killer) {
        const rewards = this.calculateKillRewards(
            killer,
            room.getPlayer(lastDamageEvent.victimId)!,
            room
        );
        
        this.send(killer.socket, createServerMessage(ServerMessageType.REWARD, {
            type: "kill",
            playerId: killer.id,
            reward: rewards,
            context: {
                killerId: killer.id,
                victimId: lastDamageEvent.victimId,
                isPlayerKill: true,
                position: lastDamageEvent.position
            }
        }));
        
        serverLogger.log(`[Server] Sent kill reward to ${killer.id}: ${rewards.credits} credits, ${rewards.experience} XP`);
    }
    
    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
}
```

**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥ –≤ `GameServer` (–ø–æ—Å–ª–µ `handlePlayerKilled`):**

```typescript
/**
 * –í—ã—á–∏—Å–ª–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ —É–±–∏–π—Å—Ç–≤–æ
 */
private calculateKillRewards(
    killer: ServerPlayer,
    victim: ServerPlayer,
    room: GameRoom
): {
    experience: number;
    credits: number;
    achievements?: string[];
    missionProgress?: { missionId: string; progress: number }[];
    battlePassXP?: number;
} {
    // –ë–∞–∑–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞–≥—Ä–∞–¥
    const isPlayerKill = !room.enemies.has(victim.id);
    
    // –ë–∞–∑–æ–≤—ã–µ –Ω–∞–≥—Ä–∞–¥—ã
    let baseExperience = isPlayerKill ? 100 : 50;
    let baseCredits = isPlayerKill ? 200 : 100;
    
    // –ë–æ–Ω—É—Å—ã –∑–∞ —Å–µ—Ä–∏—é —É–±–∏–π—Å—Ç–≤
    const killStreak = killer.kills || 0;
    if (killStreak >= 10) {
        baseExperience *= 3; // +200%
        baseCredits *= 2;
    } else if (killStreak >= 7) {
        baseExperience *= 2.5; // +150%
        baseCredits *= 1.5;
    } else if (killStreak >= 5) {
        baseExperience *= 2; // +100%
        baseCredits *= 1.25;
    } else if (killStreak >= 3) {
        baseExperience *= 1.5; // +50%
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
    const achievements: string[] = [];
    if (killStreak === 1) {
        achievements.push("first_blood");
    }
    if (killStreak >= 5) {
        achievements.push("kill_streak_5");
    }
    if (killStreak >= 10) {
        achievements.push("kill_streak_10");
    }
    
    return {
        experience: Math.round(baseExperience),
        credits: Math.round(baseCredits),
        achievements: achievements.length > 0 ? achievements : undefined,
        missionProgress: [{ missionId: "kill", progress: 1 }],
        battlePassXP: 25
    };
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è**:

- [ ] –ö–æ–º–ø–∏–ª—è—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] REWARD —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ —É–±–∏–π—Å—Ç–≤–µ
- [ ] –ù–∞–≥—Ä–∞–¥—ã –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—Ç–ø—Ä–∞–≤–∫—É –Ω–∞–≥—Ä–∞–¥

---

### –≠–¢–ê–ü 4: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è MP –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (2-3 –¥–Ω—è)

**–¶–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å MP —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Ö

**–®–∞–≥–∏**:

1. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `NetworkEnemySpawner`
2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `NetworkRewardProvider`
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É REWARD –≤ `MultiplayerManager`
4. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `Game.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `src/client/multiplayer.ts`:**

**–°—Ç—Ä–æ–∫–∞ ~3190** (–ø–æ—Å–ª–µ `onEnemyUpdate`):

```typescript
// –ù–û–í–û–ï: –ö–æ–ª–±—ç–∫ –¥–ª—è –Ω–∞–≥—Ä–∞–¥
private onRewardCallback: ((data: RewardData) => void) | null = null;

onReward(callback: (data: RewardData) => void): void {
    this.onRewardCallback = callback;
}

// –°—Ç—Ä–æ–∫–∞ ~922 (–≤ handleMessage):
case ServerMessageType.REWARD:
    this.handleReward(message.data);
    break;

// –ù–æ–≤—ã–π –º–µ—Ç–æ–¥:
private handleReward(data: RewardData): void {
    if (this.onRewardCallback) {
        this.onRewardCallback(data);
    }
}
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `src/client/game.ts`:**

**–°—Ç—Ä–æ–∫–∞ ~3200** (–º–µ—Ç–æ–¥ `initializeProviders`):

```typescript
private initializeProviders(): void {
    // –°–æ–∑–¥–∞—ë–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–ª—è –æ–±–æ–∏—Ö —Ä–µ–∂–∏–º–æ–≤
    const spawnerDeps: EnemySpawnerDependencies = {
        systems: {
            scene: this.scene,
            tank: this.tank,
            soundManager: this.soundManager,
            effectsManager: this.effectsManager,
            chunkSystem: this.chunkSystem,
            hud: this.hud,
            currencyManager: this.currencyManager,
            experienceSystem: this.experienceSystem,
            playerProgression: this.playerProgression,
            achievementsSystem: this.achievementsSystem,
            missionSystem: this.missionSystem,
            currentMapType: this.currentMapType,
            gameStarted: this.gameStarted,
            survivalStartTime: this.survivalStartTime,
            isMultiplayer: this.isMultiplayer
        },
        multiplayerManager: this.multiplayerManager
    };
    
    const rewardDeps: RewardProviderDependencies = {
        experienceSystem: this.experienceSystem!,
        currencyManager: this.currencyManager!,
        playerProgression: this.playerProgression!,
        achievementsSystem: this.achievementsSystem!,
        missionSystem: this.missionSystem!,
        dailyQuestsSystem: this.dailyQuestsSystem,
        battlePassSystem: this.battlePassSystem,
        playerStats: this.playerStats,
        tank: this.tank!,
        hud: this.hud,
        multiplayerManager: this.multiplayerManager,
        getDifficultyMultiplier: () => this.getDifficultyRewardMultiplier()
    };
    
    this.enemySpawner = ProviderFactory.createEnemySpawner(
        this.isMultiplayer,
        spawnerDeps
    );
    
    this.rewardProvider = ProviderFactory.createRewardProvider(
        this.isMultiplayer,
        rewardDeps
    );
    
    // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ REWARD —Å–æ–æ–±—â–µ–Ω–∏—è (–¥–ª—è MP)
    if (this.isMultiplayer && this.multiplayerManager) {
        this.multiplayerManager.onReward((data) => {
            if (this.rewardProvider && 'handleServerReward' in this.rewardProvider) {
                this.rewardProvider.handleServerReward({
                    type: data.type,
                    playerId: data.playerId,
                    reward: data.reward,
                    context: data.context
                });
            }
        });
    }
    
    logger.log(`[Game] Providers initialized for ${this.isMultiplayer ? 'MP' : 'SP'} mode`);
}
```

**–°—Ç—Ä–æ–∫–∞ ~3865** (–º–µ—Ç–æ–¥ `spawnEnemyTanks`):

```typescript
spawnEnemyTanks() {
    logger.log(`[Game] spawnEnemyTanks() called - mapType: ${this.currentMapType}, gameStarted: ${this.gameStarted}, isMultiplayer: ${this.isMultiplayer}`);

    // –ù–û–í–û–ï: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä
    if (this.enemySpawner && this.enemySpawner.isReady()) {
        logger.log("[Game] Using EnemySpawner provider");
        this.enemySpawner.spawnEnemies();
        
        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
        this.enemyTanks = this.enemySpawner.getEnemies();
        
        // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–º–µ—Ä—Ç–∏
        this.enemyTanks.forEach(enemy => {
            if (!enemy.onDeathObservable.hasObservers()) {
                enemy.onDeathObservable.add(() => {
                    this.handleEnemyDeath(enemy);
                });
            }
        });
        
        return;
    }
    
    // –°–¢–ê–†–´–ô –ö–û–î: Fallback (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–¥–∞–ª—ë–Ω –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
    logger.warn("[Game] EnemySpawner not ready, using old code");
    // ... —Å—Ç–∞—Ä—ã–π –∫–æ–¥ ...
}
```

**–°—Ç—Ä–æ–∫–∞ ~5071** (–º–µ—Ç–æ–¥ `handleEnemyDeath`):

```typescript
private handleEnemyDeath(enemy: EnemyTank): void {
    logger.log("[GAME] Enemy tank destroyed! Adding kill...");

    // –ù–û–í–û–ï: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä
    if (this.rewardProvider && this.rewardProvider.isReady()) {
        const localPlayerId = this.multiplayerManager?.getPlayerId() || "local";
        const context: RewardContext = {
            killerId: localPlayerId,
            victimId: (enemy as any).id || (enemy as any).networkId || "enemy",
            isPlayerKill: false, // –í—Ä–∞–≥–∏ –≤—Å–µ–≥–¥–∞ –±–æ—Ç—ã
            position: enemy.chassis?.position ? {
                x: enemy.chassis.position.x,
                y: enemy.chassis.position.y,
                z: enemy.chassis.position.z
            } : undefined
        };
        
        const reward = this.rewardProvider.awardKill(context);
        
        // –í SP –ø—Ä–∏–º–µ–Ω—è–µ–º —Å—Ä–∞–∑—É, –≤ MP –∂–¥—ë–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–∞
        if (!this.isMultiplayer) {
            this.rewardProvider.applyReward(reward, localPlayerId);
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–º–µ—Ä—Ç–∏ —á–µ—Ä–µ–∑ spawner
        if (this.enemySpawner) {
            this.enemySpawner.handleEnemyDeath(enemy, localPlayerId);
        }
        
        // –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ (AI Coordinator, —Ä–µ—Å–ø–∞–≤–Ω)
        if (this.aiCoordinator) {
            this.aiCoordinator.unregisterBot(enemy.getId().toString());
        }
        
        // –†–µ—Å–ø–∞–≤–Ω –ª–æ–≥–∏–∫–∞
        const pos = enemy.chassis?.position || Vector3.Zero();
        if (this.chunkSystem && this.chunkSystem.garagePositions.length > 0) {
            const nearestGarage = this.gameGarage.findNearestAvailableGarage(pos);
            if (nearestGarage) {
                this.gameGarage.startGarageRespawnTimer(nearestGarage);
            } else {
                const nearest = this.gameGarage.findNearestGarage(pos);
                if (nearest) {
                    this.gameGarage.startGarageRespawnTimer(nearest);
                } else {
                    this.gameGarage.startGarageRespawnTimer(pos);
                }
            }
        } else {
            this.gameGarage.startGarageRespawnTimer(pos);
        }
        
        return; // –í—ã—Ö–æ–¥–∏–º, –Ω–µ –≤—ã–ø–æ–ª–Ω—è—è —Å—Ç–∞—Ä—ã–π –∫–æ–¥
    }
    
    // –°–¢–ê–†–´–ô –ö–û–î: Fallback (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–¥–∞–ª—ë–Ω –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
    logger.warn("[Game] RewardProvider not ready, using old code");
    // ... –≤–µ—Å—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è**:

- [ ] MP —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- [ ] –ë–æ—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ù–∞–≥—Ä–∞–¥—ã –ø—Ä–∏—Ö–æ–¥—è—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
- [ ] –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

**–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π**:

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å MP –∏–≥—Ä—É
2. –£–±–∏—Ç—å –∏–≥—Ä–æ–∫–∞/–±–æ—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –Ω–∞–≥—Ä–∞–¥—ã –ø—Ä–∏—Ö–æ–¥—è—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –Ω–∞–≥—Ä–∞–¥—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

---

### –≠–¢–ê–ü 5: –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞ (1-2 –¥–Ω—è)

**–¶–µ–ª—å**: –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –∫–æ–¥ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–®–∞–≥–∏**:

1. ‚úÖ –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É –∏–∑ `handleEnemyDeath` (–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤—ã–∑–æ–≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤)
2. ‚úÖ –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É –∏–∑ `spawnEnemyTanks` (–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤—ã–∑–æ–≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞)
3. ‚úÖ –£–¥–∞–ª–∏—Ç—å `giveKillReward` –∏–∑ `GameEnemies.ts` (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
4. ‚úÖ –£–¥–∞–ª–∏—Ç—å –≤—Å–µ `if (isMultiplayer)` –ø—Ä–æ–≤–µ—Ä–∫–∏, –∑–∞–º–µ–Ω—ë–Ω–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏

**–í–∞–ª–∏–¥–∞—Ü–∏—è**:

- [ ] –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] SP —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] MP —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π
- [ ] –ö–æ–¥ —Å—Ç–∞–ª —á–∏—â–µ (–º–µ–Ω—å—à–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è)

---

### –≠–¢–ê–ü 6: –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2-3 –¥–Ω—è)

**–¶–µ–ª—å**: –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**:

**SP —Ä–µ–∂–∏–º**:

- [ ] –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
- [ ] –°–ø–∞–≤–Ω –≤—Ä–∞–≥–æ–≤
- [ ] –£–±–∏–π—Å—Ç–≤–æ –≤—Ä–∞–≥–∞ ‚Üí –Ω–∞–≥—Ä–∞–¥—ã –Ω–∞—á–∏—Å–ª–µ–Ω—ã
- [ ] –£–±–∏–π—Å—Ç–≤–æ —Ç—É—Ä–µ–ª–∏ ‚Üí –Ω–∞–≥—Ä–∞–¥—ã –Ω–∞—á–∏—Å–ª–µ–Ω—ã
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- [ ] –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
- [ ] –ú–∏—Å—Å–∏–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

**MP —Ä–µ–∂–∏–º**:

- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
- [ ] –°–ø–∞–≤–Ω –±–æ—Ç–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –£–±–∏–π—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–∞ ‚Üí –Ω–∞–≥—Ä–∞–¥—ã —Å —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –£–±–∏–π—Å—Ç–≤–æ –±–æ—Ç–∞ ‚Üí –Ω–∞–≥—Ä–∞–¥—ã —Å —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –º–∞—Ç—á–∞
- [ ] –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
- [ ] –ú–∏—Å—Å–∏–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

**Edge cases**:

- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ SP ‚Üí MP (—Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç)
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ MP ‚Üí SP (–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ)
- [ ] –ü–æ—Ç–µ—Ä—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º—è –º–∞—Ç—á–∞
- [ ] –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∏–¥—É—â–µ–π –∏–≥—Ä–µ
- [ ] –í—ã—Ö–æ–¥ –∏–∑ –∏–≥—Ä—ã –≤–æ –≤—Ä–µ–º—è –º–∞—Ç—á–∞

---

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ edge cases

### Edge Case 1: –ü—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

**–†–µ—à–µ–Ω–∏–µ**: Fallback –Ω–∞ —Å—Ç–∞—Ä—ã–π –∫–æ–¥

```typescript
if (this.enemySpawner && this.enemySpawner.isReady()) {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä
} else {
    logger.warn("[Game] Provider not ready, using fallback");
    // –°—Ç–∞—Ä—ã–π –∫–æ–¥
}
```

### Edge Case 2: –ü–æ—Ç–µ—Ä—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ MP

**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ Local –ø—Ä–æ–≤–∞–π–¥–µ—Ä

```typescript
if (this.multiplayerManager && !this.multiplayerManager.isConnected()) {
    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ Local –ø—Ä–æ–≤–∞–π–¥–µ—Ä
    this.enemySpawner = ProviderFactory.createEnemySpawner(false, deps);
    this.rewardProvider = ProviderFactory.createRewardProvider(false, deps);
}
```

### Edge Case 3: –ù–∞–≥—Ä–∞–¥–∞ –Ω–µ –ø—Ä–∏—à–ª–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞

**–†–µ—à–µ–Ω–∏–µ**: –¢–∞–π–º–∞—É—Ç –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å

```typescript
// –í NetworkRewardProvider
private pendingRewards: Map<string, { reward: Reward; timestamp: number }> = new Map();

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
setInterval(() => {
    const now = Date.now();
    this.pendingRewards.forEach((value, key) => {
        if (now - value.timestamp > 10000) { // 10 —Å–µ–∫—É–Ω–¥ —Ç–∞–π–º–∞—É—Ç
            logger.warn(`[NetworkRewardProvider] Reward timeout for ${key}`);
            // –ú–æ–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏–ª–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –±–∞–∑–æ–≤—É—é –Ω–∞–≥—Ä–∞–¥—É
        }
    });
}, 5000);
```

### Edge Case 4: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º

```typescript
private appliedRewards: Set<string> = new Set();

async applyReward(reward: Reward, playerId: string): Promise<void> {
    const key = `${playerId}_${reward.experience}_${reward.credits}_${Date.now()}`;
    if (this.appliedRewards.has(key)) {
        logger.warn("[RewardProvider] Duplicate reward detected, skipping");
        return;
    }
    this.appliedRewards.add(key);
    // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞–≥—Ä–∞–¥—É
}
```

---

## üîç –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

### –ß–µ–∫–ª–∏—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞**:

- [ ] –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É
- [ ] –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ —Å–ª–æ–º–∞–Ω–∞
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É—Ö—É–¥—à–∏–ª–∞—Å—å

**–ü–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞**:

- [ ] –ù–æ–≤—ã–π –∫–æ–¥ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –º–∏–Ω–∏–º—É–º 10 —Ä–∞–∑
- [ ] –í—Å–µ edge cases –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
- [ ] –ù–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –±–∞–≥–æ–≤
- [ ] –ö–æ–¥ –ø–æ–∫—Ä—ã—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

1. ‚úÖ **–£–¥–∞–ª–µ–Ω–∏–µ `if (isMultiplayer)`**: –° 34 –¥–æ 0 –≤ –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–µ
2. ‚úÖ **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**: –ú–∏–Ω—É—Å 60-70% –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞
3. ‚úÖ **–†–∞–±–æ—Ç–∞ —Å–∏—Å—Ç–µ–º –≤ MP**: –í—Å–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
4. ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞**: –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ MP –º–∞—Ç—á–µ–π
5. ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ù–µ—Ç –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
6. ‚úÖ **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞**: –ö–æ–¥ —Å—Ç–∞–ª –ø—Ä–æ—â–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ

---

## üö® –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫:

1. **–û—Ç–∫–∞—Ç –∫–æ–¥–∞**: `git revert <commit>`
2. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π –ª–æ–≥–∏–∫–∏**: –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥
3. **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `USE_PROVIDERS = false` —Ñ–ª–∞–≥
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

---

## üìù –î–µ—Ç–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫
- [ ] –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é

### SP –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

- [ ] LocalEnemySpawner —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [ ] LocalRewardProvider —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [ ] Unit-—Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è SP

- [ ] –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ Game.ts
- [ ] SP —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- [ ] –°—Ç–∞—Ä—ã–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- [ ] –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π

### –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

- [ ] REWARD —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ
- [ ] calculateKillRewards —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [ ] –ù–∞–≥—Ä–∞–¥—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### MP –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

- [ ] NetworkEnemySpawner —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [ ] NetworkRewardProvider —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ REWARD –≤ MultiplayerManager
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Game.ts

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MP

- [ ] MP —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- [ ] –ë–æ—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –ù–∞–≥—Ä–∞–¥—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
- [ ] –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π

### –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞

- [ ] –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∞ –∏–∑ handleEnemyDeath
- [ ] –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∞ –∏–∑ spawnEnemyTanks
- [ ] giveKillReward —É–¥–∞–ª—ë–Ω
- [ ] if (isMultiplayer) –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–¥–∞–ª–µ–Ω—ã

### –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] SP —Ä–µ–∂–∏–º –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] MP —Ä–µ–∂–∏–º –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] Edge cases –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:

‚úÖ **–û–¥–∏–Ω –∫–æ–¥** –¥–ª—è SP –∏ MP —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

‚úÖ **–õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å** –Ω–æ–≤—ã–µ —Ä–µ–∂–∏–º—ã (–∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤, PvE)

‚úÖ **–ü—Ä–æ—â–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** (–º–æ–∫–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)

‚úÖ **–ú–µ–Ω—å—à–µ –±–∞–≥–æ–≤** (–Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏)

‚úÖ **–í—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç** –≤ MP (–ø—Ä–æ–≥—Ä–µ—Å—Å, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –º–∏—Å—Å–∏–∏)

‚úÖ **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å** (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, fallback, –≤–∞–ª–∏–¥–∞—Ü–∏—è)